@model PermissionUpdateDto
@{
    Layout = null;
}
<div class="row">
    <div class="col-lg-12 col-xl-12">
        <form asp-action="PermissionUpdate">
            <input hidden class="form-control" asp-for="TicketId" autocomplete="off">
            <input hidden class="form-control" asp-for="PermissionCreateDate" autocomplete="off">

            <div class="row">
                <input type="hidden" asp-for="ConfirmSend" />
                <div class="col-sm-6">
                    <div class="form-group">
                        <label class="floatLabel">İcazə Səbəbi: </label>
                        <textarea type="text" class="form-control " asp-for="Reason" autocomplete="off"></textarea>
                        <span asp-validation-for="Reason" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="floatLabel">  Başlama Saatı: </label>
                                <input type="time" class="form-control" asp-for="StartTime" autocomplete="off">
                                <span asp-validation-for="StartTime" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="floatLabel">  Bitmə Saatı: </label>
                                <input type="time" class="form-control" asp-for="EndTime" autocomplete="off">
                                <span asp-validation-for="EndTime" class="text-danger"></span>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <div class="form-group row">
                <div class="col-sm-12 d-flex justify-content-between">
                    <button type="submit" id="confirm-id" class="btn btn-dark-blue m-b-0 btn-block">
                        Təsdiqlə
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>

@await Html.PartialAsync("_ValidationScriptsPartial")

<script>
    $(document).ready(function() {

        $(document).on("change","#EndTime",function(){
            var oneH = 1000 * 60;
            p = "1/1/0000";
            var startDT = ($("#StartTime").val());
            console.log(startDT)
            var endDT = ($("#EndTime").val());
            console.log(endDT)
            var sMS = new Date(p + startDT);
            console.log(sMS)
            var eMS = new Date(p + endDT);
            console.log(eMS)
            var result = Math.round((eMS.getTime() - sMS.getTime()) / oneH);
            let num = 480;

            if(result > num){
            $("#EndTime").val("")
            toastr.warning(`Icazə müddəti 8 saatı aşmamalıdır !`)
            }
            if(eMS.getTime() < sMS.getTime()){
            $("#EndTime").val("")
            toastr.warning(`Başlama Saatı Bitmə Saatından kiçik olmamalıdır !`)
            }

        })

    });
</script>